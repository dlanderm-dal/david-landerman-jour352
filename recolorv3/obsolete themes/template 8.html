<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UI Template â€” Palette Recolor Preview Tool</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;500;600&family=Source+Code+Pro:wght@400;500&display=swap">
    <style>
        /* ============================================ */
        /* RESET & CSS VARIABLES                        */
        /* ============================================ */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg: #f5f7f4;
            --surface: #ffffff;
            --surface-2: #eef2ec;
            --border: rgba(130, 155, 120, 0.22);
            --text: #2a3328;
            --text-muted: #7d8a78;
            --accent: #6b8f5e;
            --accent-dim: #567a4a;
            --column-line: rgba(130, 155, 120, 0.15);
        }

        /* ============================================ */
        /* BASE TYPOGRAPHY & LAYOUT                     */
        /* ============================================ */
        body {
            font-family: 'Source Sans 3', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding: 1.5rem;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        header {
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
            padding-bottom: 1rem;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: -0.02em;
            margin-bottom: 0.25rem;
        }

        .subtitle-warning {
            color: var(--text-muted);
            font-size: 0.7rem;
            font-style: italic;
            margin-bottom: 0.25rem;
        }

        .byline {
            color: var(--text-muted);
            font-size: 0.75rem;
            font-style: italic;
            margin-bottom: 0.75rem;
        }

        /* Instructions */
        .instructions-credits { margin-top: 0.5rem; }
        .instructions-credits summary {
            cursor: pointer;
            color: var(--accent);
            font-size: 0.8rem;
            font-weight: 500;
            padding: 0.25rem 0;
            user-select: none;
        }
        .instructions-credits summary:hover { color: var(--accent-dim); }

        /* ============================================ */
        /* WORKSPACE FLEX LAYOUT                        */
        /* ============================================ */
        .workspace {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            align-items: flex-start;
        }

        .canvas-area {
            background: var(--surface);
            border-radius: 10px;
            border: 1px solid var(--border);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            position: relative;
            min-width: 300px;
            flex: 1 1 400px;
            max-width: 100%;
            box-shadow: 0 3px 10px rgba(100, 130, 90, 0.1);
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            flex: 0 0 500px;
            min-width: 400px;
            max-width: 100%;
        }

        @media (max-width: 950px) {
            .workspace { flex-direction: column; }
            .canvas-area { flex: 0 0 auto; width: 100% !important; }
            .sidebar { flex: 0 0 auto; width: 100%; min-width: 0; }
        }

        /* ============================================ */
        /* CANVAS AREA                                  */
        /* ============================================ */
        .canvas-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .canvas-title {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .canvas-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            min-height: 340px;
            flex-shrink: 0;
            flex: 1;
            border: 1px solid var(--border);
        }

        /* Fake image placeholder */
        .fake-image {
            width: 100%;
            height: 340px;
            background: linear-gradient(135deg, #2e4a2a 0%, #6b8f5e 25%, #8aaa6e 45%, #d6dcc8 65%, #7a8c50 85%, #4a6340 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            font-style: italic;
            border-radius: 8px;
        }

        /* Zoom controls overlay */
        .zoom-controls {
            position: absolute;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 4px;
            z-index: 150;
        }

        .zoom-btn {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            background: var(--surface);
            border: 1px solid var(--border);
            color: var(--text);
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(100, 130, 90, 0.1);
        }

        /* Zoom slider */
        .zoom-slider-container {
            position: absolute;
            left: 4px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            z-index: 150;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 6px 2px;
            box-shadow: 0 2px 6px rgba(100, 130, 90, 0.1);
        }

        .zoom-slider-label {
            font-size: 10px;
            font-weight: 600;
            color: var(--text);
            letter-spacing: 2px;
        }

        .zoom-value-display {
            font-size: 12px;
            font-weight: 500;
            font-family: 'Source Code Pro', monospace;
            color: var(--accent);
            min-width: 34px;
            text-align: center;
        }

        .zoom-hint-note {
            font-size: 8px;
            color: var(--text-muted);
            text-align: center;
            padding: 2px 4px;
            line-height: 1.3;
            white-space: nowrap;
        }

        .zoom-slider-vertical {
            -webkit-appearance: none;
            appearance: none;
            width: 70px;
            height: 3px;
            border-radius: 2px;
            background: rgba(130, 155, 120, 0.2);
            outline: none;
            transform: rotate(-90deg);
            transform-origin: center center;
            margin: 32px 0;
        }
        .zoom-slider-vertical::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 10px; height: 10px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            border: 1px solid var(--surface);
        }

        /* Picker overlay (right side) */
        .picker-overlay {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 200;
        }

        .picker-toggle-btn {
            padding: 8px 12px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 2px 6px rgba(100, 130, 90, 0.1);
        }

        /* Pan hint */
        .pan-hint {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 4px 10px;
            font-size: 10px;
            color: var(--text-muted);
            z-index: 50;
            pointer-events: none;
        }

        /* Tool Legend */
        .tool-legend-panel {
            margin-top: 0.75rem;
            padding: 0.75rem;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
        }
        .tool-legend-title {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.4rem;
        }
        .tool-legend-grid {
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }
        .tool-legend-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            font-size: 0.6rem;
            color: var(--text-muted);
            line-height: 1.4;
        }
        .tool-legend-emoji {
            font-size: 0.8rem;
            flex-shrink: 0;
            width: 1.2rem;
            text-align: center;
        }
        .tool-legend-desc strong { color: var(--text); }

        /* ============================================ */
        /* PANELS                                       */
        /* ============================================ */
        .panel {
            background: var(--surface);
            border-radius: 10px;
            border: 1px solid var(--border);
            padding: 1rem;
            overflow: visible;
            width: 100%;
            box-shadow: 0 3px 10px rgba(100, 130, 90, 0.1);
        }

        .panel-title {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.75rem;
        }

        /* ============================================ */
        /* BUTTONS                                      */
        /* ============================================ */
        .btn {
            background: var(--surface-2);
            border: 1px solid rgba(130, 155, 120, 0.3);
            border-radius: 6px;
            padding: 0.5rem 0.75rem;
            color: var(--text);
            font-family: inherit;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.15s;
        }
        .btn:hover { background: #e2e8df; }
        .btn-primary {
            background: var(--accent);
            border-color: var(--accent);
            color: #ffffff;
            font-weight: 500;
        }
        .btn-primary:hover { background: var(--accent-dim); border-color: var(--accent-dim); }
        .btn-full { width: 100%; }
        .btn-small { padding: 3px 8px; font-size: 10px; }
        .btn-icon { display: inline-flex; align-items: center; gap: 0.35rem; }
        .btn-group { display: flex; gap: 0.5rem; }
        .btn-group .btn { flex: 1; }

        /* ============================================ */
        /* COLOR ANALYSIS                               */
        /* ============================================ */
        .color-strip-container { margin-bottom: 0.5rem; }
        .color-strip-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }
        .color-strip-label {
            font-size: 0.65rem;
            color: var(--text-muted);
        }
        .recolored-header { margin-top: 6px; }
        .descale-checkbox {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.6rem;
            color: var(--text-muted);
            cursor: pointer;
        }
        .descale-checkbox input {
            width: 12px; height: 12px;
            cursor: pointer;
            accent-color: var(--accent);
        }
        .color-strip {
            display: flex;
            height: 24px;
            border-radius: 4px;
            overflow: hidden;
            border: 1px solid var(--border);
        }
        .color-strip-segment { height: 100%; }

        /* Tolerance */
        .tolerance-container {
            margin-bottom: 0.5rem;
            padding: 8px 10px;
            background: #f8faf7;
            border-radius: 6px;
            border: 1px solid var(--border);
        }
        .tolerance-header { margin-bottom: 6px; }
        .tolerance-label-main { font-size: 0.8rem; color: var(--text); font-weight: 600; }
        .tolerance-optional { font-size: 0.65rem; color: var(--text-muted); font-weight: 400; font-style: italic; }
        .tolerance-sublabel { font-size: 0.6rem; color: var(--text-muted); margin-top: 2px; }
        .tolerance-slider-row { display: flex; align-items: center; gap: 10px; }
        .tolerance-slider-row .slider { flex: 1; }
        .tolerance-value {
            font-size: 12px;
            font-family: 'Source Code Pro', monospace;
            color: var(--accent);
            min-width: 24px;
            text-align: right;
        }
        .tolerance-controls { display: flex; gap: 4px; margin-top: 8px; }

        /* Slider */
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(130, 155, 120, 0.18);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px; height: 16px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            border: 2px solid var(--surface);
            box-shadow: 0 1px 4px rgba(100, 130, 90, 0.25);
        }

        /* Sidebar pick colors button */
        .pick-colors-sidebar-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
            padding: 0.6rem 1rem;
            font-size: 0.85rem;
        }

        .pick-colors-description {
            font-size: 0.6rem;
            color: var(--text-muted);
            text-align: left;
            line-height: 1.5;
            margin-top: 0.5rem;
            font-style: italic;
        }
        .pick-colors-description-wrapper { text-align: center; display: none; }

        /* ============================================ */
        /* PALETTE MAPPING                              */
        /* ============================================ */
        .palette-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .palette-row-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            min-width: 50px;
        }

        .live-preview-toggle {
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            margin-left: 8px;
            padding: 2px 6px;
            border-radius: 4px;
        }
        .live-preview-toggle input[type="checkbox"] {
            width: 12px; height: 12px;
            cursor: pointer;
            accent-color: var(--accent);
        }
        .live-preview-label {
            font-size: 0.65rem;
            color: var(--text-muted);
            user-select: none;
        }

        .palette-count-control {
            display: flex;
            align-items: center;
            gap: 4px;
            background: #f8faf7;
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 2px 6px;
        }
        .palette-count-control input {
            width: 32px;
            background: transparent;
            border: none;
            color: var(--text);
            font-family: 'Source Code Pro', monospace;
            font-size: 12px;
            text-align: center;
        }
        .palette-count-btn {
            width: 18px; height: 18px;
            border: none;
            background: var(--surface-2);
            color: var(--text);
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .palette-count-btn:hover { background: #dde3da; }

        /* Column mapping */
        .column-mapping-container {
            position: relative;
            margin: 0.5rem 0;
            overflow-x: auto;
            min-height: 220px;
        }

        .origin-overflow-bank {
            width: 100%;
            background: #f8faf7;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px;
            margin-bottom: 12px;
            display: block;
        }
        .overflow-bank-title {
            font-size: 10px;
            color: var(--text-muted);
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .overflow-origins-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            min-height: 48px;
            padding: 4px;
        }

        .mapping-columns {
            display: flex;
            gap: 0;
            width: 100%;
            flex-wrap: nowrap;
            align-items: stretch;
            position: relative;
        }
        .mapping-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            min-width: 56px;
            flex: 1;
        }
        .mapping-column:not(:last-child)::after {
            content: '';
            position: absolute;
            right: -1px;
            top: 0; bottom: 0;
            width: 1px;
            background: var(--column-line);
            z-index: 1;
        }

        .column-origins {
            display: flex;
            flex-direction: column;
            gap: 4px;
            min-height: 120px;
            padding: 8px;
            flex: 1;
            width: 100%;
        }
        .column-percentage {
            font-size: 10px;
            color: var(--accent);
            font-family: 'Source Code Pro', monospace;
            margin-top: 4px;
            font-weight: 500;
        }

        /* Origin swatches */
        .origin-swatch {
            width: 48px; height: 48px;
            border-radius: 6px;
            border: 2px solid var(--border);
            cursor: grab;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: rgba(255,255,255,0.7);
            font-size: 12px;
        }
        .origin-swatch-info {
            font-size: 8px;
            color: var(--text-muted);
            white-space: nowrap;
            font-family: 'Source Code Pro', monospace;
            text-align: center;
            margin-top: 4px;
            line-height: 1.3;
        }

        /* Targets row */
        .mapping-targets-row {
            width: 100%;
            display: flex;
            gap: 0;
            border-top: 1px solid var(--border);
            align-items: stretch;
            flex-wrap: nowrap;
            position: relative;
        }
        .mapping-targets-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            flex: 1;
            min-width: 56px;
        }
        .mapping-targets-column:not(:last-child)::after {
            content: '';
            position: absolute;
            right: -1px;
            top: 0; bottom: 0;
            width: 1px;
            background: var(--column-line);
            z-index: 1;
        }
        .column-target {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            padding: 8px;
            width: 100%;
            min-height: 80px;
        }

        /* Target swatches */
        .color-slot {
            width: 48px; height: 48px;
            border-radius: 6px;
            border: 2px solid var(--border);
            cursor: pointer;
            position: relative;
        }
        .color-slot.selected {
            border-color: var(--accent);
            box-shadow: 0 0 0 2px var(--surface), 0 0 0 4px var(--accent);
        }

        .swatch-hex {
            font-size: 8px;
            color: var(--text-muted);
            font-family: 'Source Code Pro', monospace;
            text-align: center;
            margin-top: 2px;
        }
        .swatch-buttons {
            display: flex;
            gap: 2px;
            justify-content: center;
            margin-top: 2px;
        }
        .swatch-buttons button {
            width: 16px; height: 16px;
            border-radius: 50%;
            background: var(--surface-2);
            border: 1px solid var(--border);
            color: var(--text-muted);
            font-size: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.7;
        }
        .swatch-buttons button:hover { opacity: 1; background: #e2e8df; }
        .swatch-buttons .bypass-btn.active {
            opacity: 1;
            background: var(--accent);
            border-color: var(--accent);
            color: #fff;
            box-shadow: 0 0 6px rgba(107, 143, 94, 0.5);
        }
        .target-category-label {
            font-size: 9px;
            color: var(--text-muted);
            text-align: center;
            margin-top: 4px;
        }

        /* ============================================ */
        /* TARGET CHOICE BOX                            */
        /* ============================================ */
        .target-choice-description {
            font-size: 0.65rem;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
            font-style: italic;
            line-height: 1.5;
        }

        .target-tool-section {
            border: 1px solid var(--border);
            border-radius: 6px;
            margin-bottom: 0.5rem;
            overflow: hidden;
        }
        .target-tool-summary {
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text);
            background: var(--surface-2);
            user-select: none;
            list-style: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .target-tool-summary:hover { background: #e2e8df; }
        .target-tool-summary::-webkit-details-marker { display: none; }
        .target-tool-summary::before {
            content: '\25B8';
            font-size: 0.7rem;
            color: var(--text-muted);
            transition: transform 0.15s;
        }
        .target-tool-section[open] > .target-tool-summary::before {
            transform: rotate(90deg);
        }
        .target-tool-content { padding: 0.75rem; }

        /* Algorithm toggle */
        .algorithm-toggle-bottom {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 10px;
            color: var(--text-muted);
            margin-top: 0.75rem;
        }
        .algorithm-toggle-label {
            cursor: pointer;
            padding: 3px 6px;
            border-radius: 4px;
        }
        .algorithm-toggle-label.active {
            background: var(--accent);
            color: #fff;
            font-weight: 600;
        }
        .algorithm-toggle-switch {
            width: 36px; height: 18px;
            background: var(--surface-2);
            border: 1px solid var(--border);
            border-radius: 9px;
            position: relative;
            cursor: pointer;
        }
        .algorithm-toggle-switch::after {
            content: '';
            position: absolute;
            width: 14px; height: 14px;
            background: var(--text-muted);
            border-radius: 50%;
            top: 2px; left: 2px;
        }

        /* Divider */
        .divider { height: 1px; background: var(--border); margin: 1rem 0; }

        /* Slider row */
        .slider-row { margin: 0.75rem 0; }
        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 0.4rem;
        }
        .slider-value {
            font-family: 'Source Code Pro', monospace;
            color: var(--accent);
        }

        /* Adobe textarea */
        .adobe-section { margin-top: 0.5rem; }
        .adobe-instructions { margin-bottom: 0.5rem; }
        .adobe-instructions summary {
            cursor: pointer;
            color: var(--accent);
            font-size: 0.65rem;
            font-weight: 500;
            padding: 0.2rem 0;
            user-select: none;
        }
        .adobe-instructions summary:hover { color: var(--accent-dim); }
        .adobe-textarea {
            width: 100%;
            background: #f8faf7;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 0.5rem 0.6rem;
            color: var(--text);
            font-family: 'Source Code Pro', monospace;
            font-size: 0.7rem;
            margin-bottom: 0.5rem;
            resize: vertical;
            min-height: 60px;
        }
        .adobe-textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(107, 143, 94, 0.2);
        }

        /* Harmony */
        .harmony-section { margin-top: 0.5rem; }
        .harmony-row { display: flex; gap: 0.5rem; align-items: center; }
        .harmony-select {
            flex: 1;
            background: #f8faf7;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 0.4rem 0.5rem;
            color: var(--text);
            font-family: inherit;
            font-size: 0.7rem;
        }
        .harmony-select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(107, 143, 94, 0.2);
        }
        .harmony-wheel-container {
            display: flex;
            justify-content: center;
            margin: 0.5rem 0;
        }
        .harmony-wheel-placeholder {
            width: 100px; height: 100px;
            border-radius: 50%;
            background: conic-gradient(
                hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%),
                hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%)
            );
            opacity: 0.6;
        }

        /* Theme presets */
        .theme-scroll-container {
            max-height: 180px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: #f8faf7;
            margin-bottom: 0.5rem;
        }
        .theme-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
        }
        .theme-item:last-child { border-bottom: none; }
        .theme-item:hover { background: rgba(107, 143, 94, 0.06); }
        .theme-item.selected {
            background: rgba(107, 143, 94, 0.12);
            border-left: 3px solid var(--accent);
        }
        .theme-item-name { font-size: 11px; color: var(--text); min-width: 90px; flex: 1; }
        .theme-item-match {
            font-size: 9px;
            padding: 2px 5px;
            border-radius: 8px;
            font-weight: 600;
            min-width: 32px;
            text-align: center;
        }
        .theme-item-match.high { background: rgba(34,197,94,0.15); color: #2d7a4a; }
        .theme-item-match.medium { background: rgba(180,160,40,0.15); color: #8a7a20; }
        .theme-item-match.low { background: rgba(130,140,125,0.15); color: #7d8a78; }
        .theme-item-swatches { display: flex; gap: 2px; }
        .theme-item-swatch {
            width: 14px; height: 14px;
            border-radius: 2px;
            border: 1px solid rgba(130, 155, 120, 0.2);
        }

        /* Config */
        .config-section {
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border);
        }
        .config-buttons { display: flex; gap: 0.5rem; margin-bottom: 0.5rem; }
        .config-list {
            max-height: 150px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: #f8faf7;
        }
        .config-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 10px;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
        }
        .config-item:last-child { border-bottom: none; }
        .config-item:hover { background: rgba(107, 143, 94, 0.06); }
        .config-item-swatches { display: flex; gap: 2px; }
        .config-item-swatch {
            width: 12px; height: 12px;
            border-radius: 2px;
            border: 1px solid rgba(130, 155, 120, 0.2);
        }
        .config-item-info { flex: 1; font-size: 10px; color: var(--text-muted); }
        .config-item-name { font-weight: 500; color: var(--text); }

        /* Status */
        .status {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-align: center;
            padding: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ============================== -->
        <!-- HEADER                          -->
        <!-- ============================== -->
        <header>
            <h1>Graphic Design: Palette Recolor Preview Tool (v24)</h1>
            <p class="subtitle-warning">Not for photographs</p>
            <p class="byline">Ineptly vibe-coded by David Landerman</p>
            <details class="instructions-credits">
                <summary>Instructions/Credits</summary>
            </details>
        </header>

        <div class="workspace">
            <!-- ============================== -->
            <!-- IMAGE PREVIEW BOX              -->
            <!-- ============================== -->
            <div class="canvas-area">
                <div class="canvas-header">
                    <span class="canvas-title">Image Preview</span>
                    <div class="btn-group">
                        <button class="btn">Reset</button>
                        <button class="btn">Remove</button>
                        <button class="btn">Download</button>
                    </div>
                </div>

                <div class="canvas-wrapper">
                    <!-- Fake image placeholder -->
                    <div class="fake-image">
                        [ Image Preview Area ]
                    </div>

                    <!-- Zoom slider (left) -->
                    <div class="zoom-slider-container">
                        <div class="zoom-hint-note">Hold âŒ¥ + Scroll</div>
                        <span class="zoom-value-display">100%</span>
                        <input type="range" class="zoom-slider-vertical" min="100" max="400" value="100">
                        <span class="zoom-slider-label">ZOOM</span>
                    </div>

                    <!-- Picker overlay (right) -->
                    <div class="picker-overlay">
                        <button class="picker-toggle-btn">
                            <span>ðŸŽ¯</span>
                            <span>Pick Colors</span>
                        </button>
                    </div>

                    <!-- Zoom controls (bottom center) -->
                    <div class="zoom-controls">
                        <button class="zoom-btn">âŸ²</button>
                    </div>

                    <!-- Pan hint -->
                    <div class="pan-hint">Alt+Drag to pan â€¢ Alt+Scroll to zoom</div>
                </div>

                <!-- Tool Legend -->
                <div class="tool-legend-panel">
                    <div class="tool-legend-title">Tool Reference</div>
                    <div class="tool-legend-grid">
                        <div class="tool-legend-item">
                            <span class="tool-legend-emoji">ðŸŽ¨</span>
                            <span class="tool-legend-desc"><strong>Color Picker</strong> â€” Opens a manual color picker to set the target color</span>
                        </div>
                        <div class="tool-legend-item">
                            <span class="tool-legend-emoji">ðŸ”’</span>
                            <span class="tool-legend-desc"><strong>Lock/Bypass</strong> â€” Keeps origin colors unchanged through the recolor</span>
                        </div>
                        <div class="tool-legend-item">
                            <span class="tool-legend-emoji">â†©</span>
                            <span class="tool-legend-desc"><strong>Revert</strong> â€” Resets the target color back to the original extracted color</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============================== -->
            <!-- SIDEBAR                         -->
            <!-- ============================== -->
            <div class="sidebar">

                <!-- COLOR ANALYSIS -->
                <div class="panel">
                    <div class="panel-title">Color Analysis</div>

                    <!-- Distribution strips -->
                    <div class="color-strip-container">
                        <div class="color-strip-header">
                            <span class="color-strip-label">Original Distribution</span>
                            <label class="descale-checkbox">
                                <input type="checkbox">
                                <span>Descale BG</span>
                            </label>
                        </div>
                        <div class="color-strip">
                            <div class="color-strip-segment" style="background:#2d1b4e; flex: 35%;"></div>
                            <div class="color-strip-segment" style="background:#4a7c59; flex: 25%;"></div>
                            <div class="color-strip-segment" style="background:#c17832; flex: 20%;"></div>
                            <div class="color-strip-segment" style="background:#3a6b8c; flex: 12%;"></div>
                            <div class="color-strip-segment" style="background:#8b4d6e; flex: 8%;"></div>
                        </div>
                        <div class="color-strip-header recolored-header">
                            <span class="color-strip-label">Recolored Distribution</span>
                        </div>
                        <div class="color-strip">
                            <div class="color-strip-segment" style="background:#1a3a5c; flex: 35%;"></div>
                            <div class="color-strip-segment" style="background:#c44d2a; flex: 25%;"></div>
                            <div class="color-strip-segment" style="background:#d4a843; flex: 20%;"></div>
                            <div class="color-strip-segment" style="background:#2a8b6e; flex: 12%;"></div>
                            <div class="color-strip-segment" style="background:#6b3d8e; flex: 8%;"></div>
                        </div>
                    </div>

                    <!-- Color Consolidation -->
                    <div class="tolerance-container">
                        <div class="tolerance-header">
                            <span class="tolerance-label-main">Color Consolidation <span class="tolerance-optional">(optional)</span></span>
                            <div class="tolerance-sublabel">Increase this to combine similar colors in the analysis</div>
                        </div>
                        <div class="tolerance-slider-row">
                            <input type="range" class="slider" min="0" max="50" value="8">
                            <span class="tolerance-value">8</span>
                        </div>
                        <div class="tolerance-controls">
                            <button class="btn btn-small">Default</button>
                            <button class="btn btn-small">Apply</button>
                        </div>
                    </div>

                    <!-- Pick Colors button -->
                    <button class="btn btn-primary btn-full pick-colors-sidebar-btn">
                        <span>ðŸŽ¯</span> Pick Colors
                    </button>
                </div>

                <!-- PALETTE MAPPING -->
                <div class="panel">
                    <div class="panel-title">Palette Mapping</div>

                    <!-- Origin label -->
                    <div class="palette-row">
                        <span class="palette-row-label">Origin</span>
                    </div>

                    <div class="column-mapping-container">
                        <!-- Overflow bank -->
                        <div class="origin-overflow-bank">
                            <div class="overflow-bank-title">ðŸ”’ Extra Colors (Locked - No Change)</div>
                            <div class="overflow-origins-grid">
                                <div class="origin-swatch" style="background:#1a1a1a; width:36px; height:36px;"></div>
                                <div class="origin-swatch" style="background:#e8e8e8; width:36px; height:36px;"></div>
                            </div>
                        </div>

                        <!-- Columns (origins) -->
                        <div class="mapping-columns">
                            <!-- Column 1 (BG) -->
                            <div class="mapping-column">
                                <div class="column-origins">
                                    <div style="display:flex;flex-direction:column;align-items:center;">
                                        <div class="origin-swatch" style="background:#2d1b4e;"></div>
                                        <div class="origin-swatch-info">#2D1B4E<br>35%</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Column 2 -->
                            <div class="mapping-column">
                                <div class="column-origins">
                                    <div style="display:flex;flex-direction:column;align-items:center;">
                                        <div class="origin-swatch" style="background:#4a7c59;"></div>
                                        <div class="origin-swatch-info">#4A7C59<br>25%</div>
                                    </div>
                                    <div style="display:flex;flex-direction:column;align-items:center;">
                                        <div class="origin-swatch" style="background:#5a8c69;"></div>
                                        <div class="origin-swatch-info">#5A8C69<br>3%</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Column 3 -->
                            <div class="mapping-column">
                                <div class="column-origins">
                                    <div style="display:flex;flex-direction:column;align-items:center;">
                                        <div class="origin-swatch" style="background:#c17832;"></div>
                                        <div class="origin-swatch-info">#C17832<br>20%</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Column 4 -->
                            <div class="mapping-column">
                                <div class="column-origins">
                                    <div style="display:flex;flex-direction:column;align-items:center;">
                                        <div class="origin-swatch" style="background:#3a6b8c;"></div>
                                        <div class="origin-swatch-info">#3A6B8C<br>12%</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Column 5 -->
                            <div class="mapping-column">
                                <div class="column-origins">
                                    <div style="display:flex;flex-direction:column;align-items:center;">
                                        <div class="origin-swatch" style="background:#8b4d6e;"></div>
                                        <div class="origin-swatch-info">#8B4D6E<br>8%</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Targets row -->
                        <div class="mapping-targets-row">
                            <!-- Target 1 (BG) -->
                            <div class="mapping-targets-column">
                                <div class="column-target">
                                    <div class="color-slot selected" style="background:#1a3a5c;"></div>
                                    <div class="swatch-hex">#1A3A5C</div>
                                    <div class="swatch-buttons">
                                        <button title="Color Picker">ðŸŽ¨</button>
                                        <button class="bypass-btn" title="Lock/Bypass">ðŸ”’</button>
                                        <button title="Revert">â†©</button>
                                    </div>
                                    <div class="target-category-label">Background</div>
                                </div>
                            </div>
                            <!-- Target 2 -->
                            <div class="mapping-targets-column">
                                <div class="column-target">
                                    <div class="color-slot" style="background:#c44d2a;"></div>
                                    <div class="swatch-hex">#C44D2A</div>
                                    <div class="swatch-buttons">
                                        <button title="Color Picker">ðŸŽ¨</button>
                                        <button class="bypass-btn" title="Lock/Bypass">ðŸ”’</button>
                                        <button title="Revert">â†©</button>
                                    </div>
                                    <div class="target-category-label">Accent 1</div>
                                </div>
                            </div>
                            <!-- Target 3 -->
                            <div class="mapping-targets-column">
                                <div class="column-target">
                                    <div class="color-slot" style="background:#d4a843;"></div>
                                    <div class="swatch-hex">#D4A843</div>
                                    <div class="swatch-buttons">
                                        <button title="Color Picker">ðŸŽ¨</button>
                                        <button class="bypass-btn active" title="Lock/Bypass">ðŸ”’</button>
                                        <button title="Revert">â†©</button>
                                    </div>
                                    <div class="target-category-label">Accent 2</div>
                                </div>
                            </div>
                            <!-- Target 4 -->
                            <div class="mapping-targets-column">
                                <div class="column-target">
                                    <div class="color-slot" style="background:#2a8b6e;"></div>
                                    <div class="swatch-hex">#2A8B6E</div>
                                    <div class="swatch-buttons">
                                        <button title="Color Picker">ðŸŽ¨</button>
                                        <button class="bypass-btn" title="Lock/Bypass">ðŸ”’</button>
                                        <button title="Revert">â†©</button>
                                    </div>
                                    <div class="target-category-label">Accent 3</div>
                                </div>
                            </div>
                            <!-- Target 5 -->
                            <div class="mapping-targets-column">
                                <div class="column-target">
                                    <div class="color-slot" style="background:#6b3d8e;"></div>
                                    <div class="swatch-hex">#6B3D8E</div>
                                    <div class="swatch-buttons">
                                        <button title="Color Picker">ðŸŽ¨</button>
                                        <button class="bypass-btn" title="Lock/Bypass">ðŸ”’</button>
                                        <button title="Revert">â†©</button>
                                    </div>
                                    <div class="target-category-label">Accent 4</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Target control row -->
                    <div class="palette-row">
                        <span class="palette-row-label">Target</span>
                        <label class="live-preview-toggle" title="Enable live preview updates">
                            <input type="checkbox">
                            <span class="live-preview-label">Live</span>
                        </label>
                        <button class="btn btn-icon btn-small" title="Shuffle colors">
                            <span>ðŸ”€</span>
                        </button>
                        <div style="flex:1"></div>
                        <div class="palette-count-control">
                            <button class="palette-count-btn">âˆ’</button>
                            <input type="text" value="5" readonly>
                            <button class="palette-count-btn">+</button>
                        </div>
                    </div>
                </div>

                <!-- ============================== -->
                <!-- TARGET CHOICE BOX              -->
                <!-- ============================== -->
                <div class="panel">
                    <div class="panel-title">Target Choice</div>

                    <!-- Apply Recolor at top -->
                    <div class="btn-group" style="margin-bottom: 0.75rem;">
                        <button class="btn btn-primary btn-full">Apply Recolor</button>
                    </div>

                    <div class="target-choice-description">
                        Choose your target colors manually above or use the tools below.
                    </div>

                    <!-- I. Adobe Color -->
                    <details class="target-tool-section">
                        <summary class="target-tool-summary">ðŸŽ¨ Import Theme From Adobe Color</summary>
                        <div class="target-tool-content">
                            <div class="adobe-section">
                                <details class="adobe-instructions">
                                    <summary>How to get CSS from Adobe Color</summary>
                                </details>
                                <textarea class="adobe-textarea" placeholder="Paste CSS from color.adobe.com"></textarea>
                                <button class="btn btn-full">Import Palette</button>
                            </div>
                        </div>
                    </details>

                    <!-- II. Color Harmony -->
                    <details class="target-tool-section">
                        <summary class="target-tool-summary">ðŸŽ¨ Color Harmony</summary>
                        <div class="target-tool-content">
                            <div class="harmony-section">
                                <div style="font-size: 0.6rem; color: var(--text-muted); margin-bottom: 0.4rem; font-style: italic;">
                                    Based on selected target color
                                </div>
                                <div class="harmony-row">
                                    <select class="harmony-select">
                                        <option>Complementary</option>
                                        <option>Analogous</option>
                                        <option>Triadic</option>
                                        <option>Split-Complementary</option>
                                        <option>Tetradic (Square)</option>
                                    </select>
                                    <button class="btn">Harmonize</button>
                                </div>
                                <div class="harmony-wheel-container">
                                    <div class="harmony-wheel-placeholder"></div>
                                </div>
                            </div>
                        </div>
                    </details>

                    <!-- III. Theme Presets -->
                    <details class="target-tool-section">
                        <summary class="target-tool-summary">ðŸ–¼ï¸ Theme Presets</summary>
                        <div class="target-tool-content">
                            <div class="theme-scroll-container">
                                <!-- Sample theme items -->
                                <div class="theme-item selected">
                                    <div class="theme-item-name">Ocean Sunset</div>
                                    <div class="theme-item-match high">92%</div>
                                    <div class="theme-item-swatches">
                                        <div class="theme-item-swatch" style="background:#1a3a5c"></div>
                                        <div class="theme-item-swatch" style="background:#c44d2a"></div>
                                        <div class="theme-item-swatch" style="background:#d4a843"></div>
                                        <div class="theme-item-swatch" style="background:#2a8b6e"></div>
                                        <div class="theme-item-swatch" style="background:#6b3d8e"></div>
                                    </div>
                                </div>
                                <div class="theme-item">
                                    <div class="theme-item-name">Forest Dusk</div>
                                    <div class="theme-item-match medium">78%</div>
                                    <div class="theme-item-swatches">
                                        <div class="theme-item-swatch" style="background:#2d4a3e"></div>
                                        <div class="theme-item-swatch" style="background:#8b6b4a"></div>
                                        <div class="theme-item-swatch" style="background:#5a7a5e"></div>
                                        <div class="theme-item-swatch" style="background:#3a5a6a"></div>
                                        <div class="theme-item-swatch" style="background:#7a4a5a"></div>
                                    </div>
                                </div>
                                <div class="theme-item">
                                    <div class="theme-item-name">Neon Dreams</div>
                                    <div class="theme-item-match low">54%</div>
                                    <div class="theme-item-swatches">
                                        <div class="theme-item-swatch" style="background:#0a0a1a"></div>
                                        <div class="theme-item-swatch" style="background:#ff00ff"></div>
                                        <div class="theme-item-swatch" style="background:#00ffff"></div>
                                        <div class="theme-item-swatch" style="background:#ff6600"></div>
                                        <div class="theme-item-swatch" style="background:#00ff66"></div>
                                    </div>
                                </div>
                                <div class="theme-item">
                                    <div class="theme-item-name">Autumn Harvest</div>
                                    <div class="theme-item-match medium">71%</div>
                                    <div class="theme-item-swatches">
                                        <div class="theme-item-swatch" style="background:#4a2a1a"></div>
                                        <div class="theme-item-swatch" style="background:#c47832"></div>
                                        <div class="theme-item-swatch" style="background:#8a5a2a"></div>
                                        <div class="theme-item-swatch" style="background:#6a8a3a"></div>
                                        <div class="theme-item-swatch" style="background:#9a3a2a"></div>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-full">Apply Theme</button>
                        </div>
                    </details>

                    <div class="divider"></div>

                    <!-- Algorithm toggle -->
                    <div class="algorithm-toggle-bottom">
                        <span class="algorithm-toggle-label active">Simple</span>
                        <div class="algorithm-toggle-switch"></div>
                        <span class="algorithm-toggle-label">Advanced</span>
                    </div>

                    <!-- Luminosity Post Processing -->
                    <details class="target-tool-section" style="margin-top: 0.75rem;">
                        <summary class="target-tool-summary">â˜€ï¸ Color Luminosity (Post Processing)</summary>
                        <div class="target-tool-content">
                            <div style="font-size: 0.6rem; color: var(--text-muted); margin-bottom: 0.4rem; font-style: italic;">
                                Adjusts brightness after recolor. Respects locked colors.
                            </div>
                            <div class="slider-row">
                                <div class="slider-label">
                                    <span>Brightness Adjustment</span>
                                    <span class="slider-value">0</span>
                                </div>
                                <input type="range" class="slider" min="-50" max="50" value="0">
                            </div>
                            <button class="btn btn-full" style="margin-top: 0.5rem;">Apply Luminosity</button>
                        </div>
                    </details>

                    <!-- Config section -->
                    <div class="config-section">
                        <div class="config-buttons">
                            <button class="btn">Save Config</button>
                            <button class="btn">Export All</button>
                            <button class="btn">Import</button>
                        </div>
                        <div class="config-list">
                            <div class="config-item">
                                <div class="config-item-swatches">
                                    <div class="config-item-swatch" style="background:#1a3a5c"></div>
                                    <div class="config-item-swatch" style="background:#c44d2a"></div>
                                    <div class="config-item-swatch" style="background:#d4a843"></div>
                                    <div class="config-item-swatch" style="background:#2a8b6e"></div>
                                    <div class="config-item-swatch" style="background:#6b3d8e"></div>
                                </div>
                                <div class="config-item-info">
                                    <span class="config-item-name">Ocean Sunset Config</span>
                                </div>
                            </div>
                            <div class="config-item">
                                <div class="config-item-swatches">
                                    <div class="config-item-swatch" style="background:#2d4a3e"></div>
                                    <div class="config-item-swatch" style="background:#8b6b4a"></div>
                                    <div class="config-item-swatch" style="background:#5a7a5e"></div>
                                    <div class="config-item-swatch" style="background:#3a5a6a"></div>
                                    <div class="config-item-swatch" style="background:#7a4a5a"></div>
                                </div>
                                <div class="config-item-info">
                                    <span class="config-item-name">Forest Dusk Config</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Status -->
                <div class="status">Recolor applied â€” Simple algorithm â€¢ 5 targets</div>
            </div>
        </div>
    </div>
</body>
</html>
